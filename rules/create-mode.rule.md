# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤–æ–≥–æ LED —Ä–µ–∂–∏–º–∞

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —à–∞–≥–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç VladiksLED. **–í–∞–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –í–°–ï —à–∞–≥–∏**, –∏–Ω–∞—á–µ —Ä–µ–∂–∏–º –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## –ß–µ–∫-–ª–∏—Å—Ç (6 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)

| #   | –§–∞–π–ª                | –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å                                 | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
| --- | ------------------- | -------------------------------------------- | -------- |
| 1   | `src/config.h`      | –£–≤–µ–ª–∏—á–∏—Ç—å `TOTAL_MODES` –Ω–∞ 1                 | ‚òê        |
| 2   | `src/led_modes.h`   | –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∂–∏–º–∞           | ‚òê        |
| 3   | `src/led_modes.cpp` | –î–æ–±–∞–≤–∏—Ç—å `case N:` –≤ `runMode()`             | ‚òê        |
| 4   | `src/led_modes.cpp` | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–∂–∏–º–∞                   | ‚òê        |
| 5   | `src/main.cpp`      | –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ –º–∞—Å—Å–∏–≤ `MODE_NAMES[]`         | ‚òê        |
| 6   | `src/webpage.h`     | –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ JavaScript –º–∞—Å—Å–∏–≤ `modeNames` | ‚òê        |

---

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å `TOTAL_MODES` –≤ `config.h`

```cpp
// –ë—ã–ª–æ:
#define TOTAL_MODES 10

// –°—Ç–∞–ª–æ (–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 11-–≥–æ —Ä–µ–∂–∏–º–∞):
#define TOTAL_MODES 11
```

> **–í–∞–∂–Ω–æ:** –≠—Ç–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ `modeSettings[]` –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `LEDState`, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ API –∏ –∞–≤—Ç–æ—Å–≤–∏—Ç—á–µ.

---

### –®–∞–≥ 2: –û–±—ä—è–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ `led_modes.h`

–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∂–∏–º–æ–≤:

```cpp
void mode_blendwave();
void mode_rainbow_beat();
// ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã ...
void mode_solid_color();
void mode_yourname();  // <-- –î–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
```

---

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å case –≤ `runMode()` –≤ `led_modes.cpp`

–ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é `runMode()` –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π case **–ø–µ—Ä–µ–¥ `default`**:

```cpp
void runMode(uint8_t mode) {
  // ...
  switch (mode) {
    case 0: mode_blendwave(); break;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã ...
    case 9: mode_solid_color(); break;
    case 10: mode_yourname(); break;  // <-- –î–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å (–∏–Ω–¥–µ–∫—Å = TOTAL_MODES - 1)

    default: mode_rainbow_beat(); break;
  }
}
```

> **–í–∞–∂–Ω–æ:** –ò–Ω–¥–µ–∫—Å case –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –∏–º–µ–Ω–∏ —Ä–µ–∂–∏–º–∞ –≤ –º–∞—Å—Å–∏–≤–∞—Ö `MODE_NAMES[]` –∏ `modeNames`.

---

### –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ä–µ–∂–∏–º–∞ –≤ `led_modes.cpp`

–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞:

```cpp
void mode_yourname() {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
  uint8_t speed = ledState.modeSettings[ledState.currentMode].speed;  // 0-255
  uint8_t scale = ledState.modeSettings[ledState.currentMode].scale;  // 0-255
  // –î–æ—Å—Ç—É–ø–Ω—ã —Ç–∞–∫–∂–µ: color1, color2, brightness, archived

  // 2. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–æ–ª–µ–∑–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã
  uint8_t mappedSpeed = map(speed, 0, 255, MIN_VAL, MAX_VAL);

  // 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –∫ LED
  for (int i = 0; i < ledState.numLeds; i++) {
    leds[i] = CHSV(hue, saturation, value);
  }

  // –ù–ï –≤—ã–∑—ã–≤–∞—Ç—å FastLED.show() - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ main loop!
}
```

#### –®–∞–±–ª–æ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ModeSettings (–¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã):

```cpp
struct ModeSettings {
  uint8_t speed;      // –°–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ (0-255, default: 128)
  uint8_t scale;      // –ú–∞—Å—à—Ç–∞–±/–ø–ª–æ—Ç–Ω–æ—Å—Ç—å (0-255, default: 128)
  CRGB color1;        // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
  CRGB color2;        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ü–≤–µ—Ç
  uint8_t brightness; // –Ø—Ä–∫–æ—Å—Ç—å —Ä–µ–∂–∏–º–∞ (0-255, default: 255)
  bool archived;      // –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –∞–≤—Ç–æ—Å–≤–∏—Ç—á–µ
};
```

#### –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ FastLED:

- `fill_solid(leds, count, color)` ‚Äî –∑–∞–ª–∏—Ç—å –æ–¥–Ω–∏–º —Ü–≤–µ—Ç–æ–º
- `fadeToBlackBy(leds, count, amount)` ‚Äî –∑–∞—Ç—É—Ö–∞–Ω–∏–µ
- `beatsin8/16(bpm, min, max)` ‚Äî —Å–∏–Ω—É—Å–æ–∏–¥–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- `EVERY_N_MILLISECONDS(ms) { }` ‚Äî –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑ –≤ N –º—Å
- `ColorFromPalette(palette, index)` ‚Äî —Ü–≤–µ—Ç –∏–∑ –ø–∞–ª–∏—Ç—Ä—ã
- `CHSV(hue, sat, val)` / `CRGB(r, g, b)` ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —Ü–≤–µ—Ç–∞

---

### –®–∞–≥ 5: –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ `MODE_NAMES[]` –≤ `main.cpp`

–ù–∞–π—Ç–∏ –º–∞—Å—Å–∏–≤ `MODE_NAMES[]` –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ –∫–æ–Ω–µ—Ü:

```cpp
const char* MODE_NAMES[] = {
  "–°–º–µ—à–∞–Ω–Ω—ã–µ –≤–æ–ª–Ω—ã",    // 0
  "–†–∞–¥—É–∂–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è", // 1
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ ...
  "–û–¥–∏–Ω —Ü–≤–µ—Ç",          // 9
  "–í–∞—à —Ä–µ–∂–∏–º"           // 10 <-- –î–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
};
```

> **–í–∞–∂–Ω–æ:** –ò–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –Ω–æ–º–µ—Ä–æ–º case –≤ `runMode()`.

---

### –®–∞–≥ 6: –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ `modeNames` –≤ `webpage.h`

–ù–∞–π—Ç–∏ JavaScript –º–∞—Å—Å–∏–≤ `modeNames` –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ –∫–æ–Ω–µ—Ü:

```javascript
const modeNames = [
  "–°–º–µ—à–∞–Ω–Ω—ã–µ –≤–æ–ª–Ω—ã", // 0
  "–†–∞–¥—É–∂–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è", // 1
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ ...
  "–û–¥–∏–Ω —Ü–≤–µ—Ç", // 9
  "–í–∞—à —Ä–µ–∂–∏–º", // 10 <-- –î–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å
];
```

> **–í–∞–∂–Ω–æ:** –ü–æ—Ä—è–¥–æ–∫ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `MODE_NAMES[]` –≤ C++.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

1. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è:** `pio run` ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
2. **–ó–∞–≥—Ä—É–∑–∫–∞:** `pio run --target upload`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ UI:**
   - –ù–æ–≤—ã–π —Ä–µ–∂–∏–º –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –†–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏/–º–∞—Å—à—Ç–∞–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ê–≤—Ç–æ—Å–≤–∏—Ç—á –≤–∫–ª—é—á–∞–µ—Ç –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º (–µ—Å–ª–∏ –Ω–µ –≤ –∞—Ä—Ö–∏–≤–µ)

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

| –ü—Ä–æ–±–ª–µ–º–∞                      | –ü—Ä–∏—á–∏–Ω–∞                               | –†–µ—à–µ–Ω–∏–µ                          |
| ----------------------------- | ------------------------------------- | -------------------------------- |
| –†–µ–∂–∏–º –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ UI      | –ù–µ –æ–±–Ω–æ–≤–ª—ë–Ω `modeNames` –≤ `webpage.h` | –î–æ–±–∞–≤–∏—Ç—å –∏–º—è –≤ JS –º–∞—Å—Å–∏–≤         |
| Crash –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏        | –ù–µ –æ–±–Ω–æ–≤–ª—ë–Ω `TOTAL_MODES`             | –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É –≤ `config.h` |
| –†–µ–∂–∏–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω | –ù–µ—Ç case –≤ `runMode()`                | –î–æ–±–∞–≤–∏—Ç—å case —Å –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏  |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è      | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å mode              | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤    |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ò–∑–±–µ–≥–∞–π—Ç–µ —Ö–∞—Ä–¥–∫–æ–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–µ–∂–∏–º–æ–≤

–í HTML/JavaScript —á–∞—Å—Ç–∏ `webpage.h` **–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å** –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª —Ç–∏–ø–∞ `"(0/10)"`.

–ü—Ä–∞–≤–∏–ª—å–Ω–æ:

```html
<span id="currentModeIndex">(-/-)</span>
<!-- Placeholder, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è JS -->
```

–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```html
<span id="currentModeIndex">(0/10)</span>
<!-- –•–∞—Ä–¥–∫–æ–¥! -->
```

–°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `modeNames.length` –≤ JavaScript.

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤

–í—Å–µ —Ç—Ä–∏ –º–µ—Å—Ç–∞ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** –∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫** —Ä–µ–∂–∏–º–æ–≤:

1. `MODE_NAMES[]` –≤ `main.cpp` (C++)
2. `modeNames` –≤ `webpage.h` (JavaScript)
3. `switch/case` –≤ `runMode()` –≤ `led_modes.cpp`

### –ù–æ–≤—ã–π —Ä–µ–∂–∏–º –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤ –∞—Ä—Ö–∏–≤–µ

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`modeSettings[N]`) —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ EEPROM. –ü–æ—Å–∫–æ–ª—å–∫—É EEPROM —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º –ø–æ–ª—É—á–∞–µ—Ç **–º—É—Å–æ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**, –≤–∫–ª—é—á–∞—è `archived: true`.

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –ø—Ä–æ—à–∏–≤–∫–∏ –∑–∞–π–¥–∏ –≤–æ –≤–∫–ª–∞–¥–∫—É "üì¶ –ê—Ä—Ö–∏–≤–Ω—ã–µ", –Ω–∞–π–¥–∏ –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º –∏ –Ω–∞–∂–º–∏ "‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å" –≤ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî —Å–±—Ä–æ—Å–∏—Ç—å EEPROM –ø–æ–ª–Ω–æ—Å—Ç—å—é (–Ω–æ —ç—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).

---

## –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ "–ú–µ—Ç–µ–æ—Ä—ã"

```cpp
// config.h
#define TOTAL_MODES 11

// led_modes.h
void mode_meteors();

// led_modes.cpp (–≤ runMode)
case 10: mode_meteors(); break;

// led_modes.cpp (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
void mode_meteors() {
  uint8_t speed = ledState.modeSettings[ledState.currentMode].speed;
  fadeToBlackBy(leds, ledState.numLeds, 64);

  static uint8_t pos = 0;
  EVERY_N_MILLISECONDS_I(timer, 30) {
    timer.setPeriod(map(speed, 0, 255, 100, 10));
    pos = (pos + 1) % ledState.numLeds;
  }

  leds[pos] = CRGB::White;
}

// main.cpp (MODE_NAMES)
"–ú–µ—Ç–µ–æ—Ä—ã"

// webpage.h (modeNames)
"–ú–µ—Ç–µ–æ—Ä—ã"
```
